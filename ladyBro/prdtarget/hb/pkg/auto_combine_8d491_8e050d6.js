!function(t,e,i){var a=function(t){var e=document.createElement("div");return e.innerHTML=t,e.childNodes};i.alertBox=function(i){function s(t){this.opts=t||{},this.type=this.opts.type||"doubleBtn",this.title=this.opts.title||"温馨提示",this.cancelText=this.opts.cancelText||"取消",this.confirmText=this.opts.confirmText||"确定",this.cancel=this.opts.cancel||function(){},this.confirm=this.opts.confirm||function(){},this.callback=this.opts.callback||function(){},this.msg=this.opts.msg||""}s.prototype={constructor:s,getEl:function(t,e){return t.querySelector(e)},init:function(){var t=this;t.addAlertBox(),"mini"==t.type?t.minEvent():t.alertEvent()},addAlertBox:function(){var i=this;i.getMask(),i.alertBox=a(i.getHtml())[0],i.alertBox.style.cssText="width:"+parseInt(.7*i.getPos()[0])+"px;top:"+parseInt(i.getPos()[2]+.3*t.innerHeight-i.alertBox.offsetHeight/2)+"px;margin:auto 15%;",i.getEl(e,"body").appendChild(i.alertBox)},getPos:function(){var t=e.documentElement.offsetWidth||e.body.offsetWidth,i=e.documentElement.offsetHeight||e.body.offsetHeight,a=e.documentElement.scrollTop||e.body.scrollTop;return t.innerHeight>i&&(i=t.innerHeight),[t,i,a]},getHtml:function(){var t="",e=this;switch(e.type){case"doubleBtn":t+='<div class="alert-box" id="alertBox"><div class="alert-title">'+e.title+'</div><div class="alert-msg">'+e.msg+'</div><div class="wbox"><a href="javascript:;" class="w-flex ybx-btn ybx-btn-d mr10"><i>'+e.cancelText+'</i></a><a href="javascript:;" class="w-flex ybx-btn ybx-btn-a"><i>'+e.confirmText+"</i></a></div></div>";break;case"onceCancel":t+='<div class="alert-box" id="alertBox"><div class="alert-title">'+e.title+'</div><div class="alert-msg">'+e.msg+'</div><div class="wbox"><a href="javascript:;" class="w-flex ybx-btn ybx-btn-d mlr30">'+e.cancelText+"</a></div></div>";break;case"onceConfirm":t+='<div class="alert-box" id="alertBox"><div class="alert-title">'+e.title+'</div><div class="alert-msg">'+e.msg+'</div><div class="wbox"><a href="javascript:;" class="w-flex ybx-btn ybx-btn-a mlr30">'+e.confirmText+"</a></div></div>";break;case"mini":t+='<div class="alert-box alertBoxBlack" id="alertBox"><div class="alert-msg">'+e.msg+"</div></div>"}return t},getMask:function(){var t=this,i=t.getPos(),a=e.createElement("div");a.id="tMask",t.getEl(e,"body").appendChild(a),a.style.cssText="position:absolute;left:0;top:0;width:"+i[0]+"px;height:"+i[1]+"px;background:rgba(0,0,0,0.3);z-index:99","mini"==t.type&&(a.style.backgroundColor="rgba(255, 255, 255, 0)")},minEvent:function(){var t=this;setTimeout(function(){navigator.userAgent.match(/iPhone/i)?$(t.alertBox).fadeOut(500,function(){t.getEl(e,"body").removeChild(t.alertBox)}):t.remove(t.alertBox),t.remove(t.getEl(e,"#tMask"))},2e3)},alertEvent:function(){var t=this;if(t.alertBox){var e=t.getEl(t.alertBox,".ybx-btn-d"),i=t.getEl(t.alertBox,".ybx-btn-a");e&&t.reset(e,t.cancel),i&&t.reset(i,t.confirm)}},reset:function(t,i){var a=this;t.onclick=function(){i(this),a.remove(a.alertBox),a.remove(a.getEl(e,"#tMask")),a.callback&&a.callback()}},remove:function(t){this.getEl(e,"body").removeChild(t)}},new s(i).init()}}(window,window.document,window.HB=window.HB||{});
;!function(o){o.Const={PRO_PATH:"http://msale.suning.com/mtss-web/",APP_ID:"wx6aed9fdd44da794e",PRO_PATH_BIND:"https://msale.suning.com/mtss-web/",BUY_PATH:"http://m.suning.com/activeload_P443_0.html",D_SNAPP_PATH:"http://mapp.suning.com/a.php?s=qrcode/offline&f=ygznxyrc&pack=com.suning.mobile.ebuy#mp.weixin.qq.com",CHANNEL_ID:"1001001",APP_ANDROID:"http://a.app.qq.com/o/simple.jsp?pkgname=com.suning.mobile.ebuy&g_f=992129",APP_IPHONE:"http://a.app.qq.com/o/simple.jsp?pkgname=com.suning.mobile.ebuy&g_f=992129",SHARE_IMG:"http://sale.suning.com/act/20150227/100/100-100.jpg",FOCUS_SN:"http://mp.weixin.qq.com/s?__biz=MjM5NjA3MTU0MA==&mid=201247335&idx=1&sn=f6ef37131907242d75b347e378460a2b#rd",ACTIVE_RULE:"http://sale.suning.com/act/20150212/gmj/index.html",GUIDES:"http://m.suning.com/channel_P597_0.html",SHARE_TITLE:"有钱，任性！发100元大红包啦！",SHARE_DESC:"有钱，任性！发100元大红包啦！",CHECK_WECHAT:"mps/queryShareConfigInfo.do",BIND_ACCOUNT:"bindaccount.html",GET_GROUP_HB:"getgrouphb.html",GET_HB:"gethb.html",HB_DETAIL:"hbdetail.html",MY_HB:"myhb.html",VALIDATE_CODE:"validatecode.html",DO_VALIDATE_CODE:"gotoBindEgoAccount.do",DO_GET_HB:"mps/normalhb.do",DO_GET_GROUP_HB:"mps/grouphb.do",QUE_MY_TO_HB:"mps/solutionList.do",QUE_MY_FROM_HB:"mps/normalList.do",QUE_HB_DETAIL:"mps/solutionDetail.do",CHECK_PHONE:"verifyBindAct.do",CHECK_CODE:"validateAuthCode.do",GO_BIND_ACCOUNT:"bindEgoAccount.do",SEND_CODE:"register/sendAuthCode.do",REGISTER_BIND:"regBind.do",QUE_SHARE_INFO:"mps/queryShareInfo.do",QUE_FRIEND_LIST:"mps/luckyList.do",IS_TEST:!1}}(window.HB=window.HB||{});
;!function(t,e,n){var i=Array.prototype.slice;!String.format&&(String.prototype.format=function(){var t=1==arguments.length&&arguments[0]instanceof Object,e=t?arguments[0]:arguments,n=t?/\{(\w+)\}/g:/\{(\d+)\}/g;return this.replace(n,function(t,n){return e[n]||""})}),String.prototype.replaceAll=function(t,e){return RegExp.prototype.isPrototypeOf(t)?this.replace(t,e):this.replace(new RegExp(t,"g"),e)},n.$H=e.Util={IMG_HB:"img/nofilter/hb-pic.jpg",IMG_HB_EXPIRED:"img/nofilter/hb-gray.jpg",deferred:function(){var t=i.call(arguments,0);return function(e){for(var n=0,i=t.length;i>n&&t[n](e);n++);}},onlyClass:function(t,e){t.addClass(e).siblings().removeClass(e)},isNoEvent:function(t){return t.hasClass("hb-no-event")},getDate:function(t){try{var e=t.indexOf(".");-1!=e&&(t=t.substring(0,e));var n=t.split(" "),i=n[0].split("-"),o=n[1].split(":");return{y:i[0],m:i[1],d:i[2],h:o[0],mi:o[1],s:o[2]}}catch(r){return{y:1,m:1,d:1,h:1,mi:1,s:1}}},isMobile:function(){return navigator.userAgent.match(/Win/i)||navigator.userAgent.match(/MacIntel/i)||navigator.userAgent.match(/Linux/i)?!1:!0},isPhone:function(){return/(iPhone|iPod|iPad);?/i.test(navigator.userAgent)},isAndriod:function(){return/android/i.test(navigator.userAgent)},setInterval:function(t,e,n){var i=t,o=0,r="",a=function(){var t=i-o;0==t?(clearInterval(r),n&&n()):(e&&e(t),o++)};r=setInterval(a,1e3)},getURLParam:function(){var t=location.search,e=/[^\&]+=[^\&]+/g;if(!t)return{};t=t.slice(1);for(var n,i,o={};n=e.exec(t);)(i=n[0].match(/[^\=]+/g))&&(o[i[0]]=i[1]);return o},toMyHB:function(){this.redirect(this.addURLParam(e.Const.MY_HB,{openId:e.Data.OPEN_ID}))},toGuides:function(){this.redirect(e.Const.GUIDES)},toFocusSN:function(){this.redirect(e.Const.FOCUS_SN)},toGetGroupHB:function(){location.href=this.getWeChat(e.Const.PRO_PATH+e.Const.DO_GET_GROUP_HB)},toValidateCode:function(){location.href=this.getWeChat(e.Const.VALIDATE_CODE)},toApp:function(){this.redirect(this.isPhone()?e.Const.APP_IPHONE:e.Const.APP_ANDROID)},redirectId:function(n,i){this.redirect(n,t.extend({},i,{openId:e.Data.OPEN_ID}))},redirect:function(t,e){t?location.href=e?this.addURLParam(t,e):t:location.reload()},tipNetError:function(){try{Wap.ErrorNet()}catch(t){this.tipError("网络异常，请稍后再试"),console.error("Component Wap.ErrorNet is not exist")}},tipError:function(t){HB.alertBox({type:"mini",msg:t})},addURLParam:function(e,n){var i=-1===e.indexOf("?"),o="&{0}={1}",r="";return t.each(n,function(t,e){r+=o.format(t,e)}),i&&(r=r.replace("&","?")),e+r},toBuy:function(){var t=encodeURIComponent([e.Const.PRO_PATH,e.Const.DO_VALIDATE_CODE,"?target_url=",e.Const.BUY_PATH,"&channel=",e.Const.CHANNEL_ID].join("")),n=this.getWeChat(t,{state:1});this.redirect(n)},toDownLoad:function(){this.redirect(this.isPhone()?e.Const.APP_IPHONE:e.Const.APP_ANDROID)},getWeChat:function(t,n){var i=n||{};-1===t.indexOf("http")&&(t=encodeURIComponent([e.Const.PRO_PATH,"RES/hb/",t].join("")));var o=["https://open.weixin.qq.com/connect/oauth2/authorize?appid={0}&redirect_uri=",t,"&response_type=code&scope=snsapi_base&state={1}#wechat_redirect"].join("");return o.format(e.Const.APP_ID,i.state)},toggle:function(t,e,n){var i,o;n&&(i=n.show,o=n.hide),e?(this.show(t),i&&i()):(this.hide(t),o&&o())},error:function(t){var e=n.console;e||(e={},e.error=function(){}),e.error(t)},formSubmit:function(e,n,i){var o,r,a=[];"string"!=typeof e?(o=e.url,r=e.pros||{}):o=e;var s=t(['<form method="post" action="',o,'" style="position: absolute;top:-2000;left: -2000;" />'].join("")),c='<input type="hidden" name="{0}" value="{1}" />',u=[];r&&t.each(r,function(t,e){s.attr(t,e)}),t.each(n,function(t,e){u.push(c.format(t,e))}),s.append(u.join("")),a=t.makeArray(i);for(var d=0,h=a.length;h>d;d++)s.append(a[d]);t("body").append(s),s.submit(),s&&s.remove()},share:function(t){var n="{0}?activityId={1}&dirPurseId={2}",i=e.Const;t.url=this.getWeChat(encodeURIComponent(n.format(t.path,t.activityId,t.solutionId)));var o={imgUrl:t.shareIcon||i.SHARE_IMG,link:t.url,desc:t.shareContent||i.SHARE_DESC,title:t.title||i.SHARE_TITLE};wx.ready(function(){wx.checkJsApi({jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideMenuItems","showMenuItems"],success:function(){}}),wx.onMenuShareAppMessage(o),wx.onMenuShareTimeline(o)})},fixedPosHandler:function(e){navigator.userAgent.match(/AppleWebKit.*Mobile.*/)&&t(window).resize(function(){t(e).css({bottom:t(e).offset().top<=300?"-50px":"20px"})})},hideShareBtn:function(t){function e(){t?WeixinJSBridge.call("hideOptionMenu"):(WeixinJSBridge.call("hideToolbar"),WeixinJSBridge.call("showOptionMenu"))}"undefined"==typeof WeixinJSBridge?document.addEventListener?document.addEventListener("WeixinJSBridgeReady",e,!1):document.attachEvent&&(document.attachEvent("WeixinJSBridgeReady",e),document.attachEvent("onWeixinJSBridgeReady",e)):e()},getInt:function(t){return t?isNaN(t)?0:parseInt(t):0},isExistLoading:function(){return t(".sn-html5-loading").size()>0},show:function(t){t.style.display="block"},adaptHeight:function(){var e=parseInt(n.innerHeight),i=parseInt(document.body.clientHeight+t(".get-hb-foot").height()),o=Math.max(e,i),r=document.querySelector("section"),a=r.classList;a=Array.prototype.slice.call(a),a.push("pd-hb-btm");var s=a.join(" ");r.style.height=o+"px",r.style.backgroundSize="20rem "+o+"px",i>=e&&(r.className=s)}}}(Zepto,window.HB=window.HB||{},window);
;!function(t){t.Data={IS_MOBILE:$H.isMobile(),URL_PARAM:$H.getURLParam()},t.STYLE={UN_EVENT:"hb-no-event"},t.EVENT={CLICK:t.Data.IS_MOBILE?"touchstart":"click"},$.extend(t.Data,{CODE:t.Data.URL_PARAM.code,OPEN_ID:t.Data.URL_PARAM.openId}),window.test=function(n){t.Const.IS_TEST&&(n instanceof Function?n():alert(n))}}(window.HB=window.HB||{});
;!function(i,n){n.InviteFriends=function(i){function t(i){this.options=i||{}}return t.prototype={ClassName:"InviteFriends",TPL:['<div class="fx-overlay">                            ','<ul class="share-text">                          ',"</ul>                                            ","</div>                                              "].join(""),TPL_WORDS:{1:["<li>分享给小伙伴<span>一起领红包</span>吧</li>  ",'<li class="smalldesc">(提醒：每人可领取3个群红包 8个普通红包)</li>'].join(""),3:["<li>红包当然要和小伙伴<span>一起分享</span></li>  ",'<li class="smalldesc">(提醒：每人可领取3个群红包 8个普通红包)</li>'].join(""),2:["<li>好东西一定要和亲爱的小伙伴</li>  ","<li><span>一起分享</span></li>                       "].join("")},init:function(){this.dom=$(this.TPL),this.dom.find("ul").append(this.TPL_WORDS[this.options.status||1]),this.initEvent(),this.render()},initEvent:function(){var i=this;this.dom.on(n.EVENT.CLICK,function(){i.dom.remove(),i.options.remove&&i.options.remove()})},render:function(){var i=this.options;i.before&&i.before(),i.after&&i.after(),$("body>section").append(this.dom)},afterRender:function(){}},new t(i).init()}}(window,window.HB);
;!function(e,t){var n=t.Const;t.Req={getDefError:function(){$H.tipNetError()},getWholeURL:function(e){return-1===e.indexOf("http")?n.PRO_PATH+e:e},req:function(t,n,i,r,o){!o&&(o=this.getDefError),e.ajax({url:this.getWholeURL(t),success:n,error:o,async:void 0===r?!0:r,dataType:"json",data:i,type:"post",timeout:6e4,xhrFields:{withCredentials:"true"}})},queGroupHB:function(e,t,i){this.req(n.QUE_GROUP_HB,e,t,i)},queMyToHB:function(e,t){this.req(n.QUE_MY_TO_HB,e,t)},queMyFromHB:function(e,t){this.req(n.QUE_MY_FROM_HB,e,t)},queHBDetail:function(e,t,i){this.req(n.QUE_HB_DETAIL,e,t,i)},queGetHB:function(e,t){this.req(n.QUE_GET_HB,e,t)},queShareInfo:function(e,t,i){this.req(n.QUE_SHARE_INFO,e,t,i)},queFriendList:function(e,t){this.req(n.QUE_FRIEND_LIST,e,t)},checkPhone:function(e,t){this.req(n.CHECK_PHONE,e,t)},checkCode:function(e,t,i){this.req(n.CHECK_CODE,e,t,i)},bindAccount:function(e,t){$H.redirect($H.getWeChat($H.addURLParam(n.PRO_PATH+n.GO_BIND_ACCOUNT,t)))},sendCode:function(e,t){this.req(n.SEND_CODE,e,t)},regBind:function(e,t){$H.redirect($H.getWeChat($H.addURLParam(n.PRO_PATH_BIND+n.REGISTER_BIND,t)))}}}(Zepto,window.HB);
;!function(t,n){n.ErrorTip=function(t){function n(t){this.conf=t}return n.prototype={ClassName:"error",TPL:['<section class="no-data">',"<div>","<p></p>{titleStr}","<p>{desc}</p>","</div>","</section>"].join(""),TPL_TITLE:'<p class="f18 bold">{title}</p>  ',init:function(){var t,n=this.conf;n.title&&(t=t.format(n.title)),this.dom=$(this.TPL.format({titleStr:t||"",desc:n.desc||""})),this.initEvent(),this.render()},initEvent:function(){},render:function(){try{var t=this.conf;t.beforeFn&&t.beforeFn(),t.container?t.container.append(this.dom):$("body>section").append(this.dom),t.afterFn&&t.afterFn()}catch(n){$H.error("hb.error.js  append error")}},afterRender:function(){},destroy:function(){this.dom.remove()}},new n(t).init()}}(window,window.HB);
;!function(n,i,t){t.ErrorNet=function(n){function t(n){this.options=n||{},this.init(),this.initEvent(),this.render(),this.afterRender()}return t.prototype={ClassName:"ErrorNet",TPL:["<section>",'<section class="error-def">	',"	<div></div>                 ","	<p>网络异常，请稍后再试</p> ","</section>                     ","</section>"].join(""),init:function(){this.dom=i(this.TPL)},initEvent:function(){},render:function(){i("body").prepend(this.dom)},afterRender:function(){}},new t(n)}}(window,window.jQuery||window.Zepto,window.Wap=window.Wap||{});
;!function(e,t){function a(){i()}function d(){e(document).on("click",".item-detail",function(){return r(e(this)),!1}),e(document).on("click",".send-hb-btn",function(){return $H.toGetGroupHB(),!1}),e(document).on("tap",function(t){var a=t.target,d=e(a),i=d.parent(),r=a.id,o=a.dataset,s=o.eventName;switch(r){case"data-tab-myto":return $H.onlyClass(i,"cur"),n(!0),!1;case"data-tab-myfrom":return $H.onlyClass(i,"cur"),n(),!1;case"data-to-down":return $H.toDownLoad(),!1}switch(s){case"to-app":return $H.toApp(),!1;case"to-bind":return $H.toBuy(),!1}})}function i(){try{s()}catch(e){$H.error("flushMyFromHB no response")}}function r(e){$H.redirect(t.Const.HB_DETAIL,{dirPurseId:e.attr("data-detail-id"),openId:e.attr("data-open-id")})}function n(e){e?(D.hide(),C.hide(),o(),R&&P.show(),H.show()):(H.hide(),P.hide(),s(),N&&C.show(),D.show()),preIsTo=e}function o(){if(!w){var e=[];t.Req.queMyToHB(function(a){if(w=!0,a.openId&&(t.Data.OPEN_ID=a.openId),void 0===a)return $H.tipNetError();data=a.dirPurseList||[];var d,i;if(data.length<=0)return t.ErrorTip({desc:B.format("发"),container:H,afterFn:function(){b.hide(),u(H,{name:"发"})}});for(var r=0,n=data.length;n>r;r++){if(d=data[r],d.path=$H.IMG_HB,d.id=data[r].dirPurseId,d.openId=$.openId,d.reward=d.reward,i=d.receivedTime){var o=i.indexOf(".");-1!=o&&(d.receivedTime=i.substring(0,o))}"ture"===d.isExpired?(d.path=$H.IMG_HB_EXPIRED,d.desc="已过期",d.itemClass="disabled"):d.desc="0"===d.noReceiveNum?I.format("已领完","已获得{0}元奖金红包".format(d.reward)):I.format(h.format(d.receiveNum,d.noReceiveNum),"领取完获得{0}元奖金红包".format(d.reward)),d.prizeMark<=0&&(d.status=""),e.push(l.format(d))}y.empty().append(e.join("")),R=!0,R&&P.show()},{openId:t.Data.OPEN_ID,code:t.Data.CODE})}}function s(){if(!g){var e=[];t.Req.queMyFromHB(function(a){g=!0;var d;if(a.openId&&(t.Data.OPEN_ID=a.openId),void 0!=a.isBindEgo&&c("true"===a.isBindEgo),a=a.normalPurseList||[],a.length<=0)return t.ErrorTip({desc:B.format("赚"),container:D,beforeFn:function(){D.empty()},afterFn:function(){u(D,{name:"领"})}});for(var i=0,r=a.length;r>i;i++){if(d=a[i],d.purseValue=d.purseValue,"1002"===d.exchangeStatus)d.date="已兑换";else{var n=$H.getDate(d.expireTime);d.date=["兑换有效期：","{0}-{1} {2}点".format(n.m,n.d,n.h),"前有效"].join("")}var o=d.shareAccountId===d.accountId,s="2"===d.rewardType;d.purseSourceStr=o?"我的{0}红包".format(s?"普通":"奖励"):d.purseSource+"红包","true"===d.isExpired&&(d.liClass="disabled",d.date="已失效",d.ticketRule=""),e.push(m.format(d))}E.empty().append(e.join("")),N=!0,N&&C.show()},{openId:t.Data.OPEN_ID,code:t.Data.CODE})}}function c(t){e(".tip").remove();var a='<div class="tip"><i></i><p data-event-name="{0}">{1}</p></div>',d=t?a.format("to-bind",'已绑定账号，打开/下载<strong data-event-name="to-app">苏宁易购客户端</strong>去购物。'):a.format("to-bind","绑定苏宁易购账号，快速使用红包。");D.prepend(d)}function u(e,t){var a=T.format(t);e?e.append(a):v.append(a)}function p(){a(),d()}function f(){$H.hideShareBtn(!0)}var l=[' <li class="item {itemClass}"> ','	<a href="javascript:void(0);">                             ','		<div class="title"><div>{activityDesc}</div>        ',"		<span>{receivedTime}</span></div>                                         ",'		<div class="item-detail" data-detail-id="{id}" data-open-id="{openId}">       ','			<img src="{path}"/>                                      ',"			<dl>{desc}</dl>                                                                ",'			<dl class="detail-circle">详情</dl>                                              ',"		</div>                                                                               ","	</a>                                                                                     "," </li>                                                                                 "].join(""),m=['<li class="{liClass}">														',"	<dl>                                                    ","		<dd>{date}</dd>               ",'		<dd class="price">¥<span>{purseValue}</span><em>元</em></dd> ',"	</dl>                                                   ","	<dl>                                                    ","		<dd>来自-<span>{purseSourceStr}</span></dd>             ","		<dd>{ticketRule}</dd>                         ","	</dl>                                                   ","</li>                                                      "].join(""),v=e("body>section"),h='已领取{0}个，还剩下<i class="a1">{1}</i>个',I="<dd>{0}</dd><dd><div>{1}</div></dd> ",H=e(".my-to"),y=H.find("ul"),D=e(".my-from"),E=D.find(">ul"),b=e("footer"),w=!1,g=!1,$=t.Data.URL_PARAM,B="您还没有{0}过红包呢",T='<div class="send-hb-btn"><a href="javascript:void(0);">我要{name}大红包</a></div>',P=e(".myTo-foot"),C=e(".myFrom-foot"),N=!1,R=!1;test("myhb page "+location.href),e(function(){f(),p()})}(Zepto,HB);
;!function(){var t=function(t){var n="";t.forEach(function(t){n+=['<script type="text/javascript" async="true" src="',t,'"></script>'].join("")}),document.body.insertAdjacentHTML("beforeend",n)};window.addEventListener("load",function(){setTimeout(function(){t(["https://imgssl.suning.com/javascript/sn_da/da_opt.js"])},100)})}();