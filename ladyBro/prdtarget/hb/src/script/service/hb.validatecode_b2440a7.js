!function(e,t){function n(){o()}function a(){$H.fixedPosHandler(".yg-fixed"),e(document).on(t.EVENT.CLICK,function(e){var t=e.target;switch(t.id){case"yzm":return void s(e);case"hd-code-submit":return void u(e)}}),p.on("blur",function(){v=this.value,l()}),p.on("keyup",function(){var e=this.value.trim();e.length>=11&&(this.value=e.substr(0,11)),e.length<11&&B.text("")}),e("#hd-phone").keyup(function(){YG.method("inputHandle",{el:this,closeCls:".yg-input-close"})})}function o(){var n,a=x.returnFlg;switch(a){case"1":n="该手机已经绑定过多个账号,请检查账号";break;case"6":n="您的手机号码未开通苏宁易购账号哦，快去苏宁易购网站开通吧！";break;case"3":n="绑定失败";break;case"99":n="验证码输入失败";break;case"4":n="绑定成功",$H.redirectId(x.target_url);break;case"5":n="已经绑定过该手机";break;case"7":n="手机号已绑定，请更换手机号";break;case"2":$H.redirect(t.Const.BIND_ACCOUNT,{phone:v||x.phone,target_url:x.target_url,authcode:x.authcode,state:x.state});break;default:e("#alertBox").hide()}n&&HB.alertBox({type:"mini",msg:n})}function r(){return v=p.val(),!v}function i(){return b=C.val(),!b}function c(){var e=r(),t=i();return e||t}function u(){_||!c()&&h()&&t.Req.checkCode(function(e){return e?(_=!1,"1002"!=e.returnCode?HB.alertBox({type:"mini",msg:"短信验证失败"}):void t.Req.bindAccount(function(){},{target_url:encodeURIComponent(x.target_url)+","+v+","+b+","+x.channel||t.Const.CHANNEL_ID})):void 0},{mobilenum:v,authcode:b},!1)}function s(){if(!r()&&h()){var n=e(this);return n.hasClass(HB.STYLE.UN_EVENT)?!1:void t.Req.sendCode(function(e){var t=e.returnCode;if("1001"==t)d(!0),$H.setInterval(60,function(e){k.text(e+"s重新获取")},function(){d(!1),k.text("重新获取")});else{var n="获取失败";switch(t){case"01001":n="一个手机号每天只有三次获取验证码机会";break;case"01002":n="获取验证码过于频繁，请60秒后再试";break;case"01003":n="验证码超过限制，请稍后再试"}HB.alertBox({type:"mini",msg:n})}},{mobilenum:v})}}function d(e){var t=HB.STYLE.UN_EVENT+" yg-gray-bg";e?k.addClass(t):k.removeClass(t).addClass("yg-yzm-btn")}function l(){h()&&t.Req.checkPhone(function(e){H=e.isBind,y="1"===e.success,g.text(H?" 您手机号码对应的苏宁易购帐户已经与其他微信帐户绑定，请更换输入":""),B.text(y?"":"您的手机号码未注册苏宁易购会员，提交后将跳转设置密码页面完成注册。")},{mobilenum:v,openId:t.Data.OPEN_ID})}function h(){return/^1\d{10}$/.test(v)?(g.text(""),!0):(g.text("请输入正确的手机号码"),!1)}function f(){n(),a()}function m(){$H.hideShareBtn(!0)}var v,b,g=(['<a class="{0}" href="javascript:;">  ','	<p class="{1}">                     ',"		<em>{2}</em>                  ","		<em>{3}</em>                    ","	</p>                                   ","</a>                                      "].join(""),e(".hd-warn-phone")),p=(e(".hd-warn-code"),e("#hd-phone")),C=e("#yanzheng"),k=e("#yzm"),y=!1,H=!1,x=t.Data.URL_PARAM,B=e(".hb-code-tip"),_=!1;test("validatecode page "+location.href),e(function(){m(),f()})}(Zepto,HB);